function out=controller(u,P)
A=[...
    0 0 1 0;...
    0 0 0 1;...
    -0.4568 -0.6196 0 0;...
    -0.2485 -6.6174 0 0];
% A=[...
%     1 0 1 0;...
%     0 0 0 1;...
%     3 -0.6196 0 0;...
%     -0.2485 -3.6174 0 0];
B=[0 0;0 0;0.7870 -0.0426;0.0426 0.1349];
C=[1 0 0 0;0 1 0 0];
D=[0 0;0 0];
sys=ss(A,B,C,D);
Q=0.01*eye(4);
Q(1,1)=1;
Q(2,2)=1;
R=0.1*eye(2);
[K,S,E]=lqr(sys,Q,R);
out=-K*u;